loadstring(game:HttpGet("https://raw.githubusercontent.com/xwvufdwgqudwyfwdvwedyuvwd/gbewufbeufbeugfvr/refs/heads/main/Notify%20Nexa"))()
loadstring(game:HttpGet("https://raw.githubusercontent.com/xwvufdwgqudwyfwdvwedyuvwd/gbewufbeufbeugfvr/refs/heads/main/Notify%20Fish%20It"))()

-- ========================================= Event =========================================
local huntMap = {
    ["Shark Hunt"] = "Props 1",
    ["Model"] = "Props 2",
    ["Megalodon Hunt"] = "Props 3",
    ["Ghost Shark Hunt"] = "Props 4",
    ["Fishing Hunt"] = "Props 5",
}

task.spawn(function()
    while true do
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        if menuRings then
            local propsFolder = menuRings:FindFirstChild("Props")
                or menuRings:FindFirstChild("Props 1")
                or menuRings:FindFirstChild("Props 2")
                or menuRings:FindFirstChild("Props 3")
                or menuRings:FindFirstChild("Props 4")
                or menuRings:FindFirstChild("Props 5")

            if propsFolder then
                local renamed = false

                for childName, newName in pairs(huntMap) do
                    if propsFolder:FindFirstChild(childName) then
                        propsFolder.Name = newName
                        renamed = true
                        break
                    end
                end

                if not renamed then
                    propsFolder.Name = "Props"
                end
            end
        end

        task.wait(1)
    end
end)

-- ========================================= Start Event =========================================

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local hrp = character:WaitForChild("HumanoidRootPart")

-- Variabel penyimpanan
local savePosition -- posisi awal sebelum teleport
local freezeBV, freezeBG
local selectedTargets = {} -- multi pilih
local isActive = false

-- Offset per event
local offsets = {
    ["Shark Hunt"] = Vector3.new(0, 100, 0),
    ["Worm Hunt"] = Vector3.new(0, 100, 0),
    ["Megalodon Hunt"] = Vector3.new(0, 5, 0),
    ["Ghost Shark Hunt"] = Vector3.new(0, 100, 0),
    ["Fishing Hunt"] = Vector3.new(0, 100, 0),
}

-- Target finder
local targets = {
    ["Shark Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 1")
        return props and props:FindFirstChild("Shark Hunt")
    end,
    ["Worm Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 2")
        return props and props:FindFirstChild("Model")
    end,
    ["Megalodon Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 3")
        return props and props:FindFirstChild("Megalodon Hunt")
    end,
    ["Ghost Shark Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 4")
        return props and props:FindFirstChild("Ghost Shark Hunt")
    end,
    ["Fishing Hunt"] = function()
        local menuRings = workspace:FindFirstChild("!!! MENU RINGS")
        local props = menuRings and menuRings:FindFirstChild("Props 5")
        return props and props:FindFirstChild("Fishing Hunt")
    end,
}

-- Freeze player
local function ApplyFreeze()
    if freezeBV then freezeBV:Destroy() end
    if freezeBG then freezeBG:Destroy() end

    freezeBV = Instance.new("BodyVelocity")
    freezeBV.Velocity = Vector3.new(0, 0, 0)
    freezeBV.MaxForce = Vector3.new(1e5, 1e5, 1e5)
    freezeBV.Parent = hrp

    freezeBG = Instance.new("BodyGyro")
    freezeBG.CFrame = hrp.CFrame
    freezeBG.D = 10
    freezeBG.MaxTorque = Vector3.new(1e5, 1e5, 1e5)
    freezeBG.Parent = hrp
end

local function RemoveFreeze()
    if freezeBV then freezeBV:Destroy() freezeBV = nil end
    if freezeBG then freezeBG:Destroy() freezeBG = nil end
end

-- Cari target aktif pertama dari selectedTargets
local function FindActiveTarget()
    for _, name in ipairs(selectedTargets) do
        local getTarget = targets[name]
        if getTarget then
            local model = getTarget()
            if model then
                return name, model
            end
        end
    end
    return nil, nil
end

-- Fungsi teleport loop
local function TeleportLoop()
    task.spawn(function()
        while isActive do
            local eventName, targetModel = FindActiveTarget()
            if eventName and targetModel then
                local offset = offsets[eventName] or Vector3.new(0, 10, 0)
                hrp.CFrame = targetModel:GetPivot() + offset
                ApplyFreeze()

                -- Tunggu sampai model hilang
                repeat
                    task.wait(1)
                until not isActive or not targets[eventName]() -- model hilang

                RemoveFreeze()
                if isActive and savePosition then
                    hrp.CFrame = savePosition -- kembali ke posisi awal
                end
            else
                task.wait(1) -- tunggu lagi sampai ada hunt aktif
            end
        end
    end)
end

-- Update ulang saat respawn
player.CharacterAdded:Connect(function(newChar)
    character = newChar
    hrp = character:WaitForChild("HumanoidRootPart")
    if isActive then
        task.delay(1, TeleportLoop)
    end
end)


-- ========================================= Fishing Counter Gui =========================================

local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

-- UI Notif
local smallNotif = playerGui:WaitForChild("Small Notification")
local display = smallNotif:WaitForChild("Display")
local container = display:WaitForChild("Container")

local notifications = playerGui:WaitForChild("Text Notifications")
local notifFrame = notifications:WaitForChild("Frame")

local successPos = UDim2.new(0.5, 0, 0.100000001, 0)

-- counter
local successCount = 0
local failCount = 0

-- Fungsi update label
local function updateLabel(label)
    label.Text = "Success: " .. successCount .. "\nFailed: " .. failCount
end

-- Fungsi buat ScreenGui
local function createFishingGui()
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "FishingCounterGui"
    screenGui.Parent = playerGui
    screenGui.ResetOnSpawn = false

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0, 100, 0, 35)
    frame.Position = UDim2.new(0, 10, 0, 10)
    frame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    frame.BackgroundTransparency = 0.5
    frame.BorderSizePixel = 0
    frame.Parent = screenGui

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, 0, 1, 0)
    label.Position = UDim2.new(0, 0, 0, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.fromRGB(255, 255, 255)
    label.Font = Enum.Font.SourceSansBold
    label.TextSize = 14
    label.Text = "Success: 0\nFailed: 0"
    label.TextWrapped = true
    label.Parent = frame

    -- Success detection
    container:GetPropertyChangedSignal("Position"):Connect(function()
        if container.Position == successPos then
            successCount += 1
            updateLabel(label)
        end
    end)

    -- Fail detection
    notifFrame.ChildAdded:Connect(function(child)
        if child.Name == "TextTile" then
            local header = child:WaitForChild("Header", 5)
            if header and header:IsA("TextLabel") then
                if header.Text == "The fish got away!" then
                    failCount += 1
                    updateLabel(label)
                end

                header:GetPropertyChangedSignal("Text"):Connect(function()
                    if header.Text == "The fish got away!" then
                        failCount += 1
                        updateLabel(label)
                    end
                end)
            end
        end
    end)

    return screenGui
end

-- ========================================= Auto Fish V2 =========================================

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local LocalPlayer = Players.LocalPlayer
local Container = LocalPlayer.PlayerGui["Small Notification"].Display.Container

local Net = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")

local ChargeFishingRod = Net:WaitForChild("RF/ChargeFishingRod")
local RequestFishingMinigameStarted = Net:WaitForChild("RF/RequestFishingMinigameStarted")

local AutoFishV2 = false  -- status toggle

-- Step Functions
local function Step1()
    Container.Position = UDim2.new(0.5, 0, -1.89999998, 1)
end

local function Step2()
    ChargeFishingRod:InvokeServer(1759130348.448756)
end

local function Step3()
    RequestFishingMinigameStarted:InvokeServer(-0.5718746185302734, 0.96170184695718)
end

-- Listener Step4
local lastPosition = Container.Position
local lastChangeTime = tick()

Container:GetPropertyChangedSignal("Position"):Connect(function()
    if AutoFishV2 then
        lastPosition = Container.Position
        lastChangeTime = tick()

        if Container.Position == UDim2.new(0.5, 0, 0.100000001, 0) then
            task.wait(0.01)
            Step2()
            task.wait(0.01)
            Step3()
        end
    end
end)

-- Watchdog untuk restart jika position tidak berubah 8 detik
task.spawn(function()
    while true do
        task.wait(1)
        if AutoFishV2 and tick() - lastChangeTime >= 8 then
            Step1()
            task.wait(0.01)
            Step2()
            task.wait(0.01)
            Step3()
            lastChangeTime = tick() -- reset timer
        end
    end
end)

-- ========================================= Equip Rod =========================================

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- Remote events
local Net = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("_Index"):WaitForChild("sleitnick_net@0.2.0"):WaitForChild("net")
local EquipRemote = Net:WaitForChild("RE/EquipToolFromHotbar")
local UnequipRemote = Net:WaitForChild("RE/UnequipToolFromHotbar")

local equipLoop = nil

-- ========================================= Save Posisi =========================================

-- Variabel global
local savedCFrame = nil
local teleportEnabled = false

-- Fungsi Freeze dan kembalikan ke posisi
local function freezeCharacter()
    local player = game.Players.LocalPlayer
    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
    if not hrp or not savedCFrame then return end

    -- BodyVelocity & BodyGyro
    local bv = Instance.new("BodyVelocity")
    bv.MaxForce = Vector3.new(1e5,1e5,1e5)
    bv.Velocity = Vector3.new(0,0,0)
    bv.Parent = hrp

    local bg = Instance.new("BodyGyro")
    bg.MaxTorque = Vector3.new(1e5,1e5,1e5)
    bg.CFrame = savedCFrame
    bg.Parent = hrp

    -- Loop freeze & check distance
    spawn(function()
        while teleportEnabled and hrp and hrp.Parent do
            local distance = (hrp.Position - savedCFrame.Position).Magnitude
            if distance > 2 then
                hrp.CFrame = savedCFrame
            end
            task.wait(0.1)
        end
        -- Hapus BV & BG saat toggle dimatikan
        if bv then bv:Destroy() end
        if bg then bg:Destroy() end
    end)
end

-- ========================================= Auto Sell =========================================

local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer

-- Remote untuk jual semua item
local sellRemote = ReplicatedStorage:WaitForChild("Packages")
    :WaitForChild("_Index")
    :WaitForChild("sleitnick_net@0.2.0")
    :WaitForChild("net")
    :WaitForChild("RF/SellAllItems")

local autoSell = false
local sellDelay = 2 -- default delay
local mode = "Sell Delay" -- default mode

-- ========================================= Auto Deep Sea Quest =========================================

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer

-- Ambil Label1 dari Workspace
local questLabel = workspace["!!! MENU RINGS"]["Deep Sea Tracker"].Board.Gui.Content:WaitForChild("Label1")

-- Posisi teleport
local posBelum100 = CFrame.new(
    -3563.65063, -279.074219, -1605.75671,
     0.707868576,  1.15482976e-07,  0.706344128,
    -9.39126679e-08, 1,            -6.93785722e-08,
    -0.706344128,   -1.72237495e-08, 0.707868576
)

local posSudah100 = CFrame.new(
    -3698.01001, -135.073914, -1010.34033,
    -0.937130094, -7.4511493e-09,  0.348980278,
    -5.57951241e-09, 1,             6.36803633e-09,
    -0.348980278,  4.0207917e-09, -0.937130094
)

-- State toggle
local autoQuestEnabled = false
local freezeBV, freezeBG
local savedCFrame

-- Fungsi pasang freeze (BodyVelocity + BodyGyro)
local function Freeze(char)
    local hrp = char:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    -- Hapus dulu kalau sudah ada
    if freezeBV then freezeBV:Destroy() freezeBV = nil end
    if freezeBG then freezeBG:Destroy() freezeBG = nil end

    -- BodyVelocity
    freezeBV = Instance.new("BodyVelocity")
    freezeBV.Velocity = Vector3.new(0,0,0)
    freezeBV.MaxForce = Vector3.new(9e9, 9e9, 9e9)
    freezeBV.Parent = hrp

    -- BodyGyro
    freezeBG = Instance.new("BodyGyro")
    freezeBG.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    freezeBG.CFrame = hrp.CFrame
    freezeBG.Parent = hrp
end

-- Fungsi lepas freeze
local function Unfreeze()
    if freezeBV then freezeBV:Destroy() freezeBV = nil end
    if freezeBG then freezeBG:Destroy() freezeBG = nil end
end

-- Fungsi teleport
local function TeleportOnce(cf)
    local char = LocalPlayer.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        char:SetPrimaryPartCFrame(cf)
        savedCFrame = cf
        Freeze(char)
    end
end

-- Fungsi cek quest
local function CheckQuest()
    if not autoQuestEnabled then return end
    local text = questLabel.Text
    local persen = text:match("(%d+)%%")
    persen = tonumber(persen)

    if persen and persen < 100 then
        TeleportOnce(posBelum100)
    elseif persen and persen >= 100 then
        TeleportOnce(posSudah100)
    end
end

-- Jalankan saat teks berubah
questLabel:GetPropertyChangedSignal("Text"):Connect(CheckQuest)

-- Anti geser (balik ke posisi kalau lebih dari 2 stud)
RunService.Heartbeat:Connect(function()
    if autoQuestEnabled and savedCFrame then
        local char = LocalPlayer.Character
        if char and char:FindFirstChild("HumanoidRootPart") then
            local hrp = char.HumanoidRootPart
            if (hrp.Position - savedCFrame.Position).Magnitude > 2 then
                hrp.CFrame = savedCFrame
            end
        end
    end
end)

-- =========================================  =========================================


-- =========================================  =========================================


local WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/main/dist/main.lua"))()

local Localization = WindUI:Localization({
    Enabled = true,
    Prefix = "loc:",
    DefaultLanguage = "en",
    Translations = {
        ["en"] = {
            ["WINDUI_EXAMPLE"] = "WindUI Example",
            ["WELCOME"] = "Welcome to WindUI!",
            ["LIB_DESC"] = "Beautiful UI library for Roblox",
            ["SETTINGS"] = "Settings",
            ["APPEARANCE"] = "Appearance",
            ["FEATURES"] = "Features",
            ["UTILITIES"] = "Utilities",
            ["UI_ELEMENTS"] = "UI Elements",
            ["CONFIGURATION"] = "Configuration",
            ["SAVE_CONFIG"] = "Save Configuration",
            ["LOAD_CONFIG"] = "Load Configuration",
            ["THEME_SELECT"] = "Select Theme",
            ["TRANSPARENCY"] = "Window Transparency",
            ["LOCKED_TAB"] = "Locked Tab"
        }
    }
})

WindUI.TransparencyValue = 0.2
WindUI:SetTheme("Dark")

local function gradient(text, startColor, endColor)
    local result = ""
    for i = 1, #text do
        local t = (i - 1) / (#text - 1)
        local r = math.floor((startColor.R + (endColor.R - startColor.R) * t) * 255)
        local g = math.floor((startColor.G + (endColor.G - startColor.G) * t) * 255)
        local b = math.floor((startColor.B + (endColor.B - startColor.B) * t) * 255)
        result = result .. string.format('<font color="rgb(%d,%d,%d)">%s</font>', r, g, b, text:sub(i, i))
    end
    return result
end


-- Ambil nama player
local player = game.Players.LocalPlayer
local playerName = player.Name
local playerDisplayName = player.DisplayName

-- Buat Window versi baru
local Window = WindUI:CreateWindow({
    Title = "Nexa - Premium",
    Icon = "rbxassetid://107488593993096",
    Author = "Fish IT! Script | @ Han",
    Folder = "Hanzo",
    Size = UDim2.fromOffset(540, 420),
    Transparent = true,
    Theme = "Dark",
    
    HidePanelBackground = true,
    NewElements = false,
    Background = "https://i.imgur.com/GsfBtXF.jpeg",
    User = {
        Enabled = true,
        Anonymous = false,           -- false biar muncul nama asli
        Name = playerDisplayName,    -- Nama tampilan
        UserName = "@" .. playerName, -- Username Roblox
        Callback = function()
            WindUI:Notify({
                Title = "User Profile",
                Content = "User profile clicked!",
                Duration = 3
            })
        end
    },
    
    Acrylic = false,
    HideSearchBar = false,
    SideBarWidth = 200,
})

Window:Tag({
    Title = "v1.2.4",
    Color = Color3.fromHex("#30ff6a")
})


Window:EditOpenButton({
    Enabled = false
})

-- ✅ Tab dan UI
local Tabs = {
    Home = Window:Tab({ Title = "Home", Icon = "house"  }),
    Active = Window:Tab({ Title = "Active", Icon = "info"  }),
    Farm = Window:Tab({ Title = "Farm", Icon = "fish"  }),
    Auto = Window:Tab({ Title = "Automaticaly", Icon = "repeat-2"  }),
    Shop = Window:Tab({ Title = "Shop", Icon = "shopping-cart"  }),
    Boat = Window:Tab({ Title = "Boat", Icon = "sailboat"  }),
    Player = Window:Tab({ Title = "Player", Icon = "user"  }),
    Teleport = Window:Tab({ Title = "Teleport", Icon = "map-pin"  }),
    Server = Window:Tab({ Title = "Server", Icon = "server"  }),
}

Tabs.Home:Section({ Title = "Update" })

Tabs.Home:Paragraph({
    Title = "Here's what's new:",
    Desc = [[

    ]]
})

Tabs.Home:Section({ Title = "Server" })

Tabs.Home:Paragraph({
    Title = "Discord - Nexa | COMMUNITY",
    Desc = "Indonesia 🇮🇩",
    Image = "https://images-eds-ssl.xboxlive.com/image?url=4rt9.lXDC4H_93laV1_eHHFT949fUipzkiFOBH3fAiZZUCdYojwUyX2aTonS1aIwMrx6NUIsHfUHSLzjGJFxxsG72wAo9EWJR4yQWyJJaDaK1XdUso6cUMpI9hAdPUU_FNs11cY1X284vsHrnWtRw7oqRpN1m9YAg21d_aNKnIo-&format=source",
    ImageSize = 20,
    Color = "Grey",
    Buttons = {
        {
            Title = "Copy Link",
            Icon = "copy",
            Variant = "Tertiary",
            Callback = function()
                setclipboard("discord.gg/ECxQFc97F5")
                WindUI:Notify({
                    Title = "Copied!",
                    Content = "Discord link copied to clipboard",
                    Duration = 2
                })
            end
        }
    }
})

Tabs.Active:Section({ Title = "Info Event" })

local huntStatus = Tabs.Active:Paragraph({
    Title = "Hunt Status",
    Desc = "Checking..."
})

-- daftar props & nama hunt
local hunts = {
    ["Props 1"] = "Shark Hunt",
    ["Props 2"] = "Model", -- Worm Hunt
    ["Props 3"] = "Megalodon Hunt",
    ["Props 4"] = "Ghost Shark Hunt",
    ["Props 5"] = "Fishing Hunt",
}

-- referensi ke menu rings
local menuRings = workspace:FindFirstChild("!!! MENU RINGS")

-- fungsi update status
local function updateStatus()
    if not menuRings then return end

    local statusText = ""

    for i = 1, 5 do
        local propName = "Props " .. i
        local huntName = hunts[propName]
        local prop = menuRings:FindFirstChild(propName)
        local found = false

        if prop and huntName then
            if prop:FindFirstChild(huntName) then
                found = true
            end
        end

        -- Worm Hunt khusus (Props 2 → "Model")
        if propName == "Props 2" then
            if prop and prop:FindFirstChild("Model") then
                found = true
            end
            statusText = statusText .. "Worm Hunt: " .. (found and "Spawned!" or "Not Found") .. "\n"
        else
            statusText = statusText .. hunts[propName] .. ": " .. (found and "Spawned!" or "Not Found") .. "\n"
        end
    end

    -- hapus newline terakhir
    statusText = statusText:sub(1, #statusText - 1)

    -- waktu update (jam:menit:detik)
    local timeNow = os.date("%H:%M:%S")
    statusText = statusText .. "\n[Updated: " .. timeNow .. "]"

    huntStatus:SetDesc(statusText)
end

-- update awal
updateStatus()

-- auto update kalau ada perubahan di menuRings
if menuRings then
    menuRings.ChildAdded:Connect(function(child)
        if string.match(child.Name, "Props") then
            updateStatus()
        end
    end)

    menuRings.ChildRemoved:Connect(function(child)
        if string.match(child.Name, "Props") then
            updateStatus()
        end
    end)

    for i = 1, 5 do
        local prop = menuRings:FindFirstChild("Props " .. i)
        if prop then
            prop.ChildAdded:Connect(updateStatus)
            prop.ChildRemoved:Connect(updateStatus)
        end
    end
end

-- cek & update setiap 1 detik
task.spawn(function()
    while task.wait(1) do
        updateStatus()
    end
end)


Tabs.Active:Section({ Title = "Event Hunt" })

-- Dropdown multi pilihan event
Tabs.Active:Dropdown({
    Title = "Select Events",
    Values = {
        "Shark Hunt",
        "Worm Hunt",
        "Megalodon Hunt",
        "Ghost Shark Hunt",
        "Fishing Hunt",
    },
    Multi = true,
    AllowNone = true,
    Callback = function(options)
        selectedTargets = options
    end
})

-- Toggle Teleport
Tabs.Active:Toggle({
    Title = "Teleport To Events",
    Value = false,
    Callback = function(state)
        isActive = state
        if state then
            savePosition = hrp.CFrame -- simpan posisi awal saat toggle ON
            TeleportLoop()
        else
            RemoveFreeze()
            if savePosition then
                hrp.CFrame = savePosition
            end
        end
    end
})


Tabs.Farm:Section({ Title = "Fishing" })

-- Toggle di Tabs.Farm
local fishingGui
Tabs.Farm:Toggle({ 
    Title = "Fishing Counter Gui", 
    Value = false,
    Callback = function(state)
        if state then
            -- toggle ON: buat gui
            if not fishingGui then
                fishingGui = createFishingGui()
            end
            fishingGui.Enabled = true
        else
            -- toggle OFF: sembunyikan gui
            if fishingGui then
                fishingGui.Enabled = false
            end
        end
        print("Mode activated: " .. tostring(state))
    end
})



-- Toggle UI WindUI (paling bawah)
Tabs.Farm:Toggle({
    Title = "Auto Fish V2",
    Value = false,
    Callback = function(state)
        AutoFishV2 = state

        if AutoFishV2 then
            -- Jalankan Step1 → Step2 → Step3 sekali di awal
            Step1()
            task.wait(0.01)
            Step2()
            task.wait(0.01)
            Step3()
        end
    end
})



Tabs.Farm:Toggle({
    Title = "Auto Fishing Completed",
    Value = false,
    Callback = function(state)
        if state then
            -- Aktifkan loop auto fishing
            getgenv().AutoFishing = true
            task.spawn(function()
                while getgenv().AutoFishing do
                    pcall(function()
                        game:GetService("ReplicatedStorage")
                            :WaitForChild("Packages")
                            :WaitForChild("_Index")
                            :WaitForChild("sleitnick_net@0.2.0")
                            :WaitForChild("net")
                            :WaitForChild("RE/FishingCompleted")
                            :FireServer()
                    end)
                    task.wait(0.1) -- delay biar server nggak ke-spam terlalu cepat
                end
            end)
        else
            -- Matikan loop auto fishing
            getgenv().AutoFishing = false
        end
    end
})

Tabs.Farm:Button({
    Title = "Cancel Fishing",
    Desc = "If there is a bug or stuck, click this to cancel and restart Fishv2 auto.",
    Callback = function()
        -- Panggil RemoteFunction CancelFishingInputs
        game:GetService("ReplicatedStorage")
            :WaitForChild("Packages")
            :WaitForChild("_Index")
            :WaitForChild("sleitnick_net@0.2.0")
            :WaitForChild("net")
            :WaitForChild("RF/CancelFishingInputs")
            :InvokeServer()

        -- Notifikasi
        WindUI:Notify({
            Title = "Fishing Cancelled",
            Content = "You can now restart Fishv2 Auto.",
            Duration = 5,
        })
    end
})

Tabs.Farm:Toggle({
    Title = "Auto Equip Rod",
    Desc = "Automatically equips your fishing rod in slot 1 and unequips it when turned off",
    Value = false,
    Callback = function(state)
        local char = workspace:WaitForChild("Characters"):WaitForChild(LocalPlayer.Name)

        if state then
            -- Mulai loop auto-equip
            equipLoop = task.spawn(function()
                while task.wait(1) do
                    -- Kalau masih ada !!!FISHING_VIEW_MODEL!!! berarti rod BELUM dipegang → equip
                    if char:FindFirstChild("!!!FISHING_VIEW_MODEL!!!") then
                        EquipRemote:FireServer(1)
                    end
                end
            end)
        else
            -- Hentikan loop
            if equipLoop then
                task.cancel(equipLoop)
                equipLoop = nil
            end

            -- Langsung unequip
            UnequipRemote:FireServer()
        end
    end
})

-- ======= UI Paling Bawah di Tabs.Farm =======

-- Tombol Save Position
Tabs.Farm:Button({ 
    Title = "Save Position", 
    Callback = function() 
        local player = game.Players.LocalPlayer
        local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
        if hrp then
            savedCFrame = hrp.CFrame
            WindUI:Notify({
                Title = "Saved",
                Content = "Posisi berhasil disimpan!",
                Duration = 5,
            })
        else
            WindUI:Notify({
                Title = "Error",
                Content = "Karakter belum siap!",
                Duration = 5,
            })
        end
    end
})

-- Toggle Teleport + Freeze
Tabs.Farm:Toggle({ 
    Title = "Teleport to Saved Position", 
    Value = false,
    Callback = function(state) 
        teleportEnabled = state
        if teleportEnabled then
            freezeCharacter()
        end
    end
})

Tabs.Farm:Section({ Title = "Sell" })

-- ======= UI Paling Bawah di Tabs.Farm =======

-- Slider untuk delay
Tabs.Farm:Slider({
    Title = "Sell Delay (seconds)",
    Step = 1,
    Value = {
        Min = 1,
        Max = 30,
        Default = sellDelay,
    },
    Callback = function(value)
        sellDelay = value
    end
})

-- Dropdown untuk mode
Tabs.Farm:Dropdown({
    Title = "Select Mode",
    Values = { "Backpack Full", "Sell Delay" },
    Value = mode,
    Callback = function(option)
        mode = option
    end
})

-- Toggle auto sell
Tabs.Farm:Toggle({
    Title = "Auto Sell All Items",
    Default = false,
    Callback = function(state)
        autoSell = state
        if autoSell then
            task.spawn(function()
                while autoSell do
                    pcall(function()
                        if mode == "Sell Delay" then
                            sellRemote:InvokeServer()
                            task.wait(sellDelay)
                        elseif mode == "Backpack Full" then
                            local bagLabel = LocalPlayer.PlayerGui.Inventory.Main.Top.Options.Fish.Label.BagSize
                            if bagLabel and bagLabel.Text == "4,999/5,000" then
                                sellRemote:InvokeServer()
                            end
                            task.wait(1)
                        end
                    end)
                end
            end)
        end
    end
})

Tabs.Auto:Section({ Title = "Deep Sea Quest" })

local board = workspace["!!! MENU RINGS"]["Deep Sea Tracker"].Board
local surfaceGui = board:WaitForChild("Gui")
local content = surfaceGui:WaitForChild("Content")

local labelNames = {"Label1", "Label2", "Label3", "Label4"}

-- Buat 1 paragraf kosong
local paragraph = Tabs.Auto:Paragraph({
    Title = "Deep Sea Quest",
    Desc = ""
})

-- Fungsi update isi paragraf
local function updateParagraph()
    local lines = {}

    for _, name in ipairs(labelNames) do
        local label = content:FindFirstChild(name)
        if label then
            table.insert(lines, label.Text)
        end
    end

    paragraph:SetDesc(table.concat(lines, "\n"))
end

-- Isi pertama kali
updateParagraph()

-- Update otomatis kalau ada perubahan
for _, name in ipairs(labelNames) do
    local label = content:FindFirstChild(name)
    if label then
        label:GetPropertyChangedSignal("Text"):Connect(updateParagraph)
    end
end

-- Toggle UI
Tabs.Auto:Toggle({
    Title = "Auto Deep Sea Quest",
    Desc = "When Toggle On you can't move because of Freeze",
    Value = false,
    Callback = function(state)
        autoQuestEnabled = state
        if state then
            CheckQuest()
        else
            Unfreeze()
            savedCFrame = nil
        end
    end
})

Tabs.Auto:Section({ Title = "Aura Boat Quest" })

-- Buat paragraph sekali saja
local auraParagraph = Tabs.Auto:Paragraph({
    Title = "Aura Boat Quest",
    Desc = "" 
})

-- Update teks setiap 1 detik
spawn(function()
    while true do
        local label1Text = workspace["!!! MENU RINGS"]["Aura Tracker"].Board.Gui.Content.Label1.Text
        local label2Text = workspace["!!! MENU RINGS"]["Aura Tracker"].Board.Gui.Content.Label2.Text
        local label3Text = workspace["!!! MENU RINGS"]["Aura Tracker"].Board.Gui.Content.Label3.Text

        -- Gabungkan teks tanpa menampilkan "Label1/2/3"
        local combinedText = label1Text .. "\n" .. label2Text .. "\n" .. label3Text

        -- Update desc paragraph saja
        auraParagraph:SetDesc(combinedText)

        wait(1)
    end
end)

-- Target CFrame
local targetCFrame = CFrame.new(
    88.2434769, 9.53157043, 2685.2605,
    0.999735832, -1.020575e-08, 0.0228940968,
    1.1017133e-08, 1, 3.51753293e-08,
    -0.0228940968, 3.54192586e-08, 0.999735832
)

Tabs.Auto:Toggle({
    Title = "Auto Aura Boat Quest",
    Value = false,
    Callback = function(state)
        local player = game.Players.LocalPlayer
        local character = player.Character or player.CharacterAdded:Wait()
        local hrp = character:WaitForChild("HumanoidRootPart")
        local overhead = hrp:WaitForChild("Overhead")
        local levelLabel = overhead:WaitForChild("LevelContainer"):WaitForChild("Label")

        if state then
            -- BodyVelocity + BodyGyro untuk freeze saat teleport
            local bv = Instance.new("BodyVelocity")
            bv.MaxForce = Vector3.new(1e5,1e5,1e5)
            bv.Velocity = Vector3.new(0,0,0)
            bv.Parent = hrp

            local bg = Instance.new("BodyGyro")
            bg.MaxTorque = Vector3.new(1e5,1e5,1e5)
            bg.CFrame = hrp.CFrame
            bg.Parent = hrp

            _G.AutoAuraQuest = true
            spawn(function()
                while _G.AutoAuraQuest do
                    wait(0.1)
                    -- Step 1: cek level
                    local text = levelLabel.Text
                    local level = tonumber(text:match("%d+")) or 0
                    if level >= 200 then
                        -- Step 2: aktifkan quest
                        local args = {"AuraQuest"}
                        pcall(function()
                            game:GetService("ReplicatedStorage")
                                :WaitForChild("Packages")
                                :WaitForChild("_Index")
                                :WaitForChild("sleitnick_net@0.2.0")
                                :WaitForChild("net")
                                :WaitForChild("RF/ActivateQuestLine")
                                :InvokeServer(unpack(args))
                        end)

                        -- Step 3: teleport ke target
                        local distance = (hrp.Position - targetCFrame.Position).Magnitude
                        if distance > 2 then
                            hrp.CFrame = targetCFrame
                        end
                        bv.Velocity = Vector3.new(0,0,0)
                        bg.CFrame = targetCFrame
                    end
                end
            end)

        else
            -- matikan auto quest
            _G.AutoAuraQuest = false
            for _, v in pairs(hrp:GetChildren()) do
                if v:IsA("BodyVelocity") or v:IsA("BodyGyro") then
                    v:Destroy()
                end
            end
        end
    end
})
